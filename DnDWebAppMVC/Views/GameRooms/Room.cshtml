@model Game

@{
    ViewData["Title"] = Model.Room.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="text-center">
    <div class="header row justify-content-around mb-2">
        <h2 class="col-3">@Model.Room.Name</h2> | 
        <h2 class="col-3"><i id="Room_OwnerName">@ViewData["OwnerName"]</i></h2> | 
        <h2 class="col-3">Room Key: @Model.Room.Password</h2>
    </div>
    <hr />
    
    <div class="row justify-content-around content-wrapper">
        <div id="message-container col-lg-6">
            <ul id="message-list" class="pl-0"></ul>
        </div>

        <div id="character-sheet col-lg-6">
            @Html.DisplayFor(model => model.PlayerCharacter)
        </div>
    </div>

    <div class="bottom-center text-center" id="new-message">
        <form class="row justify-content-around" id="form">
            <input type="hidden" asp-for="Room.Id" />
            <input type="hidden" asp-for="Room.OwnerId" />
            <input type="hidden" asp-for="PlayerCharacter.OwnerId" />
            <input type="hidden" asp-for="PlayerCharacter.Name" />
            <input type="hidden" asp-for="PlayerCharacter" />
            <input type="hidden" asp-for="CurrentMessage" />

            <div class="col-lg-10 text-lg-left">
                <textarea id="message" asp-for="CurrentMessage.Text"></textarea>
            </div>
            <div class="col-lg-2 text-md-right align-self-center">
                <div class="text-center">
                    <label for="isPrivate"><i>Private</i></label>
                    <input type="checkbox" id="isPrivate" />
                </div>
                <div class="m-1">
                    @if (Model.PlayerCharacter.OwnerId == Model.Room.OwnerId)
                    {
                        <select id="user-selections"></select>
                    }
                </div>
                <div>
                    <input type="button" class="btn-primary btn-send" id="sendButton" value="Send" />
                </div>
            </div>
        </form>
    </div>
</div>


<style>
    .bottom-center
    {
        margin: auto;
        position: absolute;
        bottom: 40px;
        left: 22%;
        right: 22%;
    }
    #message-list {
        list-style-type: none;
    }
    #message-container {
        background-color: deepskyblue;
        height: 500px;
        border: solid 3px rgb(5 72 87 / 0.90);
        border-radius: 10px;
        padding: 4px;
        overflow-y: scroll;
    }
    #character-sheet {
        background-color: antiquewhite;
    }
    textarea
    {
        width: 100%;
        height: 110px;
    }
    .btn-send {
        width: 90%;
        height: 36px;
        border-radius: 6px;
    }
    .message {
        max-width: 100%;
        border: solid 2px rgb(30 52 75 / 0.60);
        border-radius: 10px;
        margin: 0.4em auto 0 auto;
    }
    .content-wrapper {
        width: 96%;
    }
</style>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chathub.js"></script>
}